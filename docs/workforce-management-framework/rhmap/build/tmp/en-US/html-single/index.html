<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>RainCatcher</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.3"/><meta name="description" content="FeedHenry 1 Documentation"/><link rel="next" href="#introducing-raincatcher" title="Chapter 1. Introducing RainCatcher"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><div xml:lang="en-US" class="book" id="idm140393507712880"><div class="titlepage"><div><div class="producttitle"><span class="productname">FeedHenry</span> <span class="productnumber">3.x</span></div><div><h1 class="title">RainCatcher</h1></div><div><h2 class="subtitle">For Use with FeedHenry 1</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services </span></div></div><div><a href="#idm140393507744320">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				FeedHenry 1 Documentation
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="chapter"><a href="#introducing-raincatcher">1. Introducing RainCatcher</a></span><ul><li><span class="section"><a href="#con-introducing-raincatcher-introducing-raincatcher">1.1. Introducing RainCatcher</a></span><ul><li><span class="section"><a href="#ref-introducing-raincatcher-introducing-raincatcher">1.1.1. RainCatcher Reference Material</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#introducing-raincatcher-features">2. Introducing RainCatcher Features and Modules</a></span><ul><li><span class="section"><a href="#raincatcher_features">2.1. RainCatcher Features</a></span><ul><li><span class="section"><a href="#con-introducing-securityfeatures-introducing-features-and-modules">2.1.1. Introducing RainCatcher Security Features</a></span></li></ul></li><li><span class="section"><a href="#raincatcher_modules">2.2. RainCatcher Modules</a></span><ul><li><span class="section"><a href="#con-passportauth-module-introducing-features-and-modules">2.2.1. Introducing the RainCatcher PassportAuth Module</a></span></li><li><span class="section"><a href="#con-datasync-module-introducing-features-and-modules">2.2.2. Introducing the RainCatcher Datasync Module</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#getting-started">3. Getting Started with RainCatcher</a></span><ul><li><span class="section"><a href="#running-the-demo-app-running-the-demo-app">3.1. Running the Demo App</a></span><ul><li><span class="section"><a href="#pro-running-the-demo-app-running-the-demo-app">3.1.1. Introduction</a></span></li><li><span class="section"><a href="#prerequisites">3.1.2. Prerequisites</a></span></li><li><span class="section"><a href="#running_the_demo_app">3.1.3. Running the Demo App</a></span></li><li><span class="section"><a href="#ref-demo-app-running-the-demo-app">3.1.4. RainCatcher Demo Application Reference Material</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#programming-a-raincatcher-project">4. Programming a RainCatcher Project</a></span><ul><li><span class="section"><a href="#working_with_passportauth">4.1. Working With PassportAuth</a></span><ul><li><span class="section"><a href="#con-passportauth-module-working-with-passportjs">4.1.1. Introducing the RainCatcher PassportAuth Module</a></span></li><li><span class="section"><a href="#pro-working-with-passportauth-working-with-passportjs">4.1.2. Introduction</a></span></li><li><span class="section"><a href="#prerequisites_2">4.1.3. Prerequisites</a></span></li><li><span class="section"><a href="#procedure">4.1.4. Procedure</a></span></li><li><span class="section"><a href="#passportauth_reference_material">4.1.5. PassportAuth Reference Material</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#raincatcher-security">5. RainCatcher Security</a></span><ul><li><span class="section"><a href="#ref-passportauth-securitystrategy-defining-raincatcher-security">5.1. Defining the Security Strategy for RainCatcher PassportAuth</a></span><ul><li><span class="section"><a href="#understanding-session-management-defining-raincatcher-security">5.1.1. Understanding Session Management</a></span></li><li><span class="section"><a href="#defining-access-control-defining-raincatcher-security">5.1.2. Defining Access Control</a></span></li><li><span class="section"><a href="#defining-password-storage-defining-raincatcher-security">5.1.3. Defining Password Storage</a></span></li><li><span class="section"><a href="#passportauth-authentication-defining-raincatcher-security">5.1.4. PassportAuth Authentication</a></span></li><li><span class="section"><a href="#passportauth-authorization-defining-raincatcher-security">5.1.5. PassportAuth Authorization</a></span></li><li><span class="section"><a href="#customizing-a-strategy-defining-raincatcher-security">5.1.6. Customizing a Strategy</a></span></li><li><span class="section"><a href="#passportAuth-demo-users-and-access-roles-defining-raincatcher-security">5.1.7. PassportAuth Demo Users and Access Roles</a></span></li></ul></li></ul></li></ul></div><section class="chapter" id="introducing-raincatcher"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Introducing RainCatcher</h1></div></div></div><section class="section" id="con-introducing-raincatcher-introducing-raincatcher"><div class="titlepage"><div><div><h2 class="title">1.1. Introducing RainCatcher</h2></div></div></div><p>
				RainCatcher is a Workforce Management Platform. The latest version of RainCatcher is 1.0.
			</p><p>
				The primary goal of RainCatcher is to produce a set of modules for developers to integrate RainCatcher features into their applications.
			</p><p>
				The following features are on the RainCatcher roadmap:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Workflow Management
					</li><li class="listitem">
						Geolocation
					</li><li class="listitem">
						Image capture
					</li><li class="listitem">
						Internal Messaging and 3rd party Messaging
					</li><li class="listitem">
						Mobile Forms
					</li><li class="listitem">
						Real-time Data Access
					</li><li class="listitem">
						Data Synchronization
					</li><li class="listitem">
						Integration of sensor data
					</li></ul></div><p>
				RainCatcher 1.0 features:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						RainCatcher Security
					</li></ul></div><section class="section" id="ref-introducing-raincatcher-introducing-raincatcher"><div class="titlepage"><div><div><h3 class="title">1.1.1. RainCatcher Reference Material</h3></div></div></div><p>
					This section includes:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							<a class="link" href="#highlighting-raincatcher-areas-of-focus-introducing-raincatcher" title="1.1.1.1. Highlighting RainCatcher Areas of Focus">Highlighting RainCatcher Areas of Focus</a>
						</li><li class="listitem">
							<a class="link" href="#raincatcher-at-a-technical-level-introducing-raincatcher" title="1.1.1.2. RainCatcher at a Technical Level">RainCatcher at a Technical Level</a>
						</li><li class="listitem">
							<a class="link" href="#identifying-raincatcher-repositories-introducing-raincatcher" title="1.1.1.3. Identifying RainCatcher Repositories">Identifying RainCatcher Repositories</a>
						</li><li class="listitem">
							<a class="link" href="#differentiating-raincatcher-from-tech-preview-introducing-raincatcher" title="1.1.1.4. Differentiating RainCatcher from 'Tech Preview'">Differentiating RainCatcher from 'Tech Preview'</a>
						</li></ol></div><section class="section" id="highlighting-raincatcher-areas-of-focus-introducing-raincatcher"><div class="titlepage"><div><div><h4 class="title">1.1.1.1. Highlighting RainCatcher Areas of Focus</h4></div></div></div><div class="table" id="idm140393511047504"><p class="title"><strong>Table 1.1. Areas of Focus</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; ">Area</th><th style="text-align: left; vertical-align: top; ">Focus</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; ">
									<p>
										Framework
									</p>
									</td><td style="text-align: left; vertical-align: top; ">
									<p>
										A generic and developer friendly framework (set of classes) for building mobile and website Workforce Management solutions
									</p>
									</td></tr><tr><td style="text-align: left; vertical-align: top; ">
									<p>
										Modules
									</p>
									</td><td style="text-align: left; vertical-align: top; ">
									<p>
										Modules specific to RainCatcher, for example: signature-module, scheduler
									</p>
									</td></tr><tr><td style="text-align: left; vertical-align: top; ">
									<p>
										Integrations
									</p>
									</td><td style="text-align: left; vertical-align: top; ">
									<p>
										Integrations to satisfy RainCatcher needs, for example: authentication, storage, offline capabilities, server side synchronization
									</p>
									</td></tr><tr><td style="text-align: left; vertical-align: top; ">
									<p>
										User Interface
									</p>
									</td><td style="text-align: left; vertical-align: top; ">
									<p>
										Graphical User Interfaces are implemented in AngularJS and Angular
									</p>
									</td></tr></tbody></table></div></div></section><section class="section" id="raincatcher-at-a-technical-level-introducing-raincatcher"><div class="titlepage"><div><div><h4 class="title">1.1.1.2. RainCatcher at a Technical Level</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://nodejs.org/en/">Node.js</a> used for server side code
							</li><li class="listitem">
								Hybrid mobile development using <a class="link" href="https://cordova.apache.org/">Cordova</a>
							</li><li class="listitem">
								Object Oriented approach (classes and interfaces)
							</li><li class="listitem">
								Focus on module reuse and flexibility
							</li><li class="listitem">
								Incorporates open-source technologies, for example: MongoDb, Keycloak, Passport.js
							</li></ul></div></section><section class="section" id="identifying-raincatcher-repositories-introducing-raincatcher"><div class="titlepage"><div><div><h4 class="title">1.1.1.3. Identifying RainCatcher Repositories</h4></div></div></div><p>
						The RainCatcher is available in three github repositories:
					</p><div class="table" id="idm140393508888928"><p class="title"><strong>Table 1.2. github Repositories</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; ">Repository</th><th style="text-align: left; vertical-align: top; ">Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; ">
									<p>
										<a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-core">raincatcher-core</a>
									</p>
									</td><td style="text-align: left; vertical-align: top; ">
									<p>
										Contains all of the supported modules and demo server.
									</p>
									</td></tr><tr><td style="text-align: left; vertical-align: top; ">
									<p>
										<a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-angularjs">raincatcher-angularjs</a>
									</p>
									</td><td style="text-align: left; vertical-align: top; ">
									<p>
										Contains angularJS user interface for RainCatcher
									</p>
									</td></tr><tr><td style="text-align: left; vertical-align: top; ">
									<p>
										<a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-docs">raincatcher-docs</a>
									</p>
									</td><td style="text-align: left; vertical-align: top; ">
									<p>
										Repository contains RainCatcher documentation
									</p>
									</td></tr></tbody></table></div></div></section><section class="section" id="differentiating-raincatcher-from-tech-preview-introducing-raincatcher"><div class="titlepage"><div><div><h4 class="title">1.1.1.4. Differentiating RainCatcher from 'Tech Preview'</h4></div></div></div><p>
						The RainCatcher project was originally called <span class="strong strong"><strong>Tech Preview</strong></span>. The <span class="strong strong"><strong>Tech Preview</strong></span> codebase is now deprecated and is accessible at <a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-documentation">Tech Preview Documentation</a>. The main differences between RainCatcher and <span class="strong strong"><strong>Tech Preview</strong></span> are:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Mediator pattern is removed from RainCatcher
							</li><li class="listitem">
								<span class="strong strong"><strong>Tech Preview</strong></span> is not object oriented
							</li><li class="listitem">
								<span class="strong strong"><strong>RainCatcher</strong></span> is written in Typescript
							</li></ul></div></section></section></section></section><section class="chapter" id="introducing-raincatcher-features"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Introducing RainCatcher Features and Modules</h1></div></div></div><section class="section" id="raincatcher_features"><div class="titlepage"><div><div><h2 class="title">2.1. RainCatcher Features</h2></div></div></div><section class="section" id="con-introducing-securityfeatures-introducing-features-and-modules"><div class="titlepage"><div><div><h3 class="title">2.1.1. Introducing RainCatcher Security Features</h3></div></div></div><p>
					RainCatcher Security is built around a <span class="strong strong"><strong>Security Interface</strong></span> which abstracts itself from all RainCatcher security libraries. RainCatcher allows you to integrate a custom security solution. RainCatcher also provides two out-of-the-box security implementations called <a class="link" href="http://www.keycloak.org/">Keycloak</a> and <a class="link" href="http://passportjs.org/">Passport.js</a>.
				</p><p>
					<span class="strong strong"><strong>Keycloak</strong></span> and <span class="strong strong"><strong>Passport.js</strong></span> both provide server side authentication and authorization. <span class="strong strong"><strong>Keycloak</strong></span> and <span class="strong strong"><strong>Passport.js</strong></span> implementations can replace each other without breaking the internal RainCatcher api, modules and also any of the reference applications.
				</p><section class="section" id="authorization_using_the_security_interface"><div class="titlepage"><div><div><h4 class="title">2.1.1.1. Authorization using the Security Interface</h4></div></div></div><p>
						If you build a custom security implementation, the endpoints are secured in the same way as the <span class="strong strong"><strong>Keycloak</strong></span> and <span class="strong strong"><strong>Passport.js</strong></span> implementations.
					</p><p>
						If you choose to build a custom security implementation, you will need to:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Import the <a class="link" href="../../../api/0.0.1/auth-passport/docs/interfaces/_src_user_userrepository_.userrepository.html">EndpointSecurity</a> interface from Passport.js
							</li><li class="listitem">
								Implement the interface in the custom security implementation
							</li><li class="listitem">
								Use the <span class="emphasis"><em>protect</em></span> method to guard routes (the security permissions being role based)
							</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							All <a class="link" href="https://expressjs.com/">express</a> routes outside of WFM modules must implement the <a class="link" href="../../../api/0.0.1/auth-passport/docs/interfaces/_src_user_userrepository_.userrepository.html">EndpointSecurity</a> Security Interface.
						</p></div></div></section><section class="section" id="introducing_passport_js"><div class="titlepage"><div><div><h4 class="title">2.1.1.2. Introducing Passport.js</h4></div></div></div><p>
						<span class="strong strong"><strong>Passport.js</strong></span> is a lightweight authentication middleware solution for Node.js and can be bundled into an existing Node.js server. <span class="strong strong"><strong>Passport.js</strong></span> offers a comprehensive set of <a class="link" href="http://passportjs.org/docs/configure">strategies</a> that support authentication using a username and password, Facebook logon, Twitter logon, and more.
					</p><p>
						For more information, see <a class="link" href="http://passportjs.org/">passportjs.org</a>.
					</p><p>
						The <a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-core/tree/master/cloud/passportauth">PassportAuth</a> module is RainCatcher’s implementation of <span class="strong strong"><strong>Passport.js</strong></span> and is the default authentication and authorization module for RainCatcher.
					</p></section><section class="section" id="introducing_keycloak"><div class="titlepage"><div><div><h4 class="title">2.1.1.3. Introducing Keycloak</h4></div></div></div><p>
						The <span class="strong strong"><strong>Keycloak</strong></span> module is a complete identity management solution. It extends standard authorization and authentication functionality and comes with all the overheads involved in running a server. Red Hat recommends using <span class="strong strong"><strong>Keycloak</strong></span> in production to avail of the many features available for enterprise security including:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://keycloak.gitbooks.io/documentation/server_admin/topics/sso-protocols.html">Single-Sign On</a>
							</li><li class="listitem">
								<a class="link" href="https://keycloak.gitbooks.io/documentation/content/server_admin/topics/user-federation.html">User Federation</a>
							</li><li class="listitem">
								<a class="link" href="https://keycloak.gitbooks.io/documentation/content/server_admin/topics/authentication/x509.html">Client Cert Authentication</a>
							</li><li class="listitem">
								<a class="link" href="https://keycloak.gitbooks.io/documentation/content/server_admin/topics/authentication/otp-policies.html">2FA with OTP</a>
							</li><li class="listitem">
								<a class="link" href="https://keycloak.gitbooks.io/documentation/content/server_admin/topics/sessions/administering.html">User Session Management</a>
							</li><li class="listitem">
								<a class="link" href="https://keycloak.gitbooks.io/documentation/server_admin/topics/events.html">Auditing</a>
							</li><li class="listitem">
								<a class="link" href="https://keycloak.gitbooks.io/documentation/content/server_admin/topics/threat/brute-force.html">Brute Force Detection</a>
							</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							<span class="strong strong"><strong>Keycloak</strong></span> is <span class="emphasis"><em>not</em></span> available by default when running the default RainCatcher solution
						</p></div></div></section><section class="section" id="choosing_passport_js_or_keycloak"><div class="titlepage"><div><div><h4 class="title">2.1.1.4. Choosing Passport.js or Keycloak</h4></div></div></div><p>
						<span class="strong strong"><strong>Passport.js</strong></span>:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								If you want a standalone Node.js based authentication solution that is ready out-of-the-box, choose <span class="strong strong"><strong>Passport.js</strong></span>
							</li></ul></div><p>
						<span class="strong strong"><strong>Keycloak</strong></span>:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								If you want a full identity management solution that can be tied into existing saml/ldap/sso solutions, choose <span class="strong strong"><strong>Keycloak</strong></span>.
							</li></ul></div></section></section></section><section class="section" id="raincatcher_modules"><div class="titlepage"><div><div><h2 class="title">2.2. RainCatcher Modules</h2></div></div></div><section class="section" id="con-passportauth-module-introducing-features-and-modules"><div class="titlepage"><div><div><h3 class="title">2.2.1. Introducing the RainCatcher PassportAuth Module</h3></div></div></div><p>
					The <a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-core/tree/master/cloud/passportauth">PassportAuth</a> module is RainCatcher’s implementation of <span class="strong strong"><strong>Passport.js</strong></span>. It is the default authentication and authorization module for RainCatcher.
				</p><p>
					<span class="strong strong"><strong>PassportAuth</strong></span> provides pluggable authentication using <a class="link" href="http://passportjs.org/docs/configure">strategies</a>. <span class="strong strong"><strong>PassportAuth</strong></span> offers a comprehensive set of strategies that support authentication using a username and password, Facebook logon, Twitter logon, and more.
				</p><p>
					<span class="strong strong"><strong>PassportAuth</strong></span> provides:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Access Control of Express routes
						</li><li class="listitem">
							Authentication using the <a class="link" href="../../../api/0.0.1/auth-passport/docs/modules/_src_auth_defaultstrategy_.html">default strategy</a>
						</li><li class="listitem">
							Express session middleware using <a class="link" href="https://github.com/expressjs/session">express-session</a>
						</li></ul></div></section><section class="section" id="con-datasync-module-introducing-features-and-modules"><div class="titlepage"><div><div><h3 class="title">2.2.2. Introducing the RainCatcher Datasync Module</h3></div></div></div><p>
					The <span class="strong strong"><strong>Datasync</strong></span> Module is an implementation of the RainCatcher Sync Framework. <span class="strong strong"><strong>Datasync</strong></span> is made up of two applications, the <a class="link" href="#datasync-cloud-app-introducing-features-and-modules" title="2.2.2.1. Datasync Cloud App">Cloud App</a> and the <a class="link" href="#datasync-client-app-introducing-features-and-modules" title="2.2.2.2. Datasync Client App">Client App</a>. The Cloud App is implemented in the <span class="strong strong"><strong>Datasync</strong></span> cloud module and the Client App is implemented in the <span class="strong strong"><strong>Datasync</strong></span> client module. The primary function of <span class="strong strong"><strong>Datasync</strong></span> is to synchronize data between the Client Apps (mobile) and the Cloud App running on a backend server.
				</p><p>
					<span class="strong strong"><strong>Datasync</strong></span> key features:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Allows synchronization of the RainCatcher workorder data between the RainCatcher Client Apps (mobile) and the RainCatcher Cloud App running on a backend server
						</li><li class="listitem">
							Allows Client Apps (mobile) to use and update data offline (local cache)
						</li><li class="listitem">
							Provides a mechanism to manage bi-directional data synchronization from multiple Client Apps into back-end data stores via the Cloud App
						</li><li class="listitem">
							Allows data updates (that is, deltas) to be distributed from the Cloud App to connected clients
						</li><li class="listitem">
							Provides facilities for managing data collisions from multiple updates in the cloud
						</li></ul></div><p>
					For advanced usage of the <span class="strong strong"><strong>Datasync</strong></span> Module, see the <a class="link" href="{WFM-RC-SyncFrameworkURL}master/docs">sync framework documentation</a>.
				</p><section class="section" id="datasync-cloud-app-introducing-features-and-modules"><div class="titlepage"><div><div><h4 class="title">2.2.2.1. Datasync Cloud App</h4></div></div></div><p>
						The <span class="strong strong"><strong>Datasync Cloud App</strong></span> is a wrapper for the RainCatcher <a class="link" href="https://github.com/feedhenry/fh-sync">Datasync server</a>. The <span class="strong strong"><strong>Datasync Cloud App</strong></span> creates a server side service that allows Client Apps (mobile) to synchronize offline data to a preferred back-end data store. By default, the server connects to a backend mongodb database and stores all client data here.
					</p><p>
						For instructions on how to implement the <span class="strong strong"><strong>Datasync Cloud App</strong></span>, see the <span class="strong strong"><strong>Datasync Cloud App</strong></span> <a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-core/blob/master/cloud/datasync/README.md">README.MD</a>
					</p><p>
						To view an example, see the <span class="strong strong"><strong>Datasync Cloud App</strong></span> <a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-core/blob/master/cloud/datasync/example/index.ts">example</a>.
					</p></section><section class="section" id="datasync-client-app-introducing-features-and-modules"><div class="titlepage"><div><div><h4 class="title">2.2.2.2. Datasync Client App</h4></div></div></div><p>
						The <span class="strong strong"><strong>Datasync Client App</strong></span> is based on the <a class="link" href="https://github.com/feedhenry/fh-sync-js">sync.js client</a>. In order to work, the <span class="strong strong"><strong>Datasync Client App</strong></span> requires the <span class="strong strong"><strong>Datasync Cloud App</strong></span> to be running on an <span class="emphasis"><em>Express</em></span> web server. The <span class="emphasis"><em>Data Synchonization Library</em></span> can be used for offline storage of mobile applications data.
					</p><p>
						For instructions on how to implement the <span class="strong strong"><strong>Datasync Client App</strong></span>, see the <span class="strong strong"><strong>Datasync Client App</strong></span> <a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-core/blob/master/client/datasync-client/README.md">README.MD</a>
					</p><p>
						To view an example, see the <span class="strong strong"><strong>Datasync Client App</strong></span> <a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-core/blob/master/cloud/datasync/example/index.ts">example</a>.
					</p></section></section></section></section><section class="chapter" id="getting-started"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Getting Started with RainCatcher</h1></div></div></div><section class="section" id="running-the-demo-app-running-the-demo-app"><div class="titlepage"><div><div><h2 class="title">3.1. Running the Demo App</h2></div></div></div><p>
				The RainCatcher demo app comprises of three applications <span class="strong strong"><strong>Mobile</strong></span>, <span class="strong strong"><strong>Portal</strong></span> and a <span class="strong strong"><strong>Node.js Server</strong></span>. For testing and demo purposes, <span class="strong strong"><strong>Mobile</strong></span> and <span class="strong strong"><strong>Portal</strong></span> are launched in the browser. <span class="strong strong"><strong>Mobile</strong></span> can be built to run on a mobile phone.
			</p><section class="section" id="pro-running-the-demo-app-running-the-demo-app"><div class="titlepage"><div><div><h3 class="title">3.1.1. Introduction</h3></div></div></div><p>
					This section includes:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							<a class="link" href="#pro-cloning-the-git-repository-running-the-demo-app" title="Cloning the Git Repository">Cloning the Git Repository</a>
						</li><li class="listitem">
							<a class="link" href="#pro-installing-angular-dependencies-running-the-demo-app" title="Installing Repository Dependencies">Installing Angular Dependencies</a>
						</li><li class="listitem">
							<a class="link" href="#pro-installing-core-dependencies-running-the-demo-app" title="Installing Core Dependencies">Installing Core Dependencies</a>
						</li><li class="listitem">
							<a class="link" href="#pro-starting-mongodb-and-redis-running-the-demo-app" title="Starting MongoDB and Redis">Starting MongoDB and Redis</a>
						</li><li class="listitem">
							<a class="link" href="#pro-starting-the-core-server-running-the-demo-app" title="Starting the Core Server">Starting the Core Server</a>
						</li><li class="listitem">
							<a class="link" href="#pro-running-the-mobile-and-portal-demo-applications-running-the-demo-app" title="Running the Mobile and Portal Demo Applications">Running the Mobile and Portal Demo Applications</a>
						</li></ol></div></section><section class="section" id="prerequisites"><div class="titlepage"><div><div><h3 class="title">3.1.2. Prerequisites</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Node and npm installed (tested on Node 6 LTS)
						</li><li class="listitem">
							git
						</li><li class="listitem">
							access to <code class="literal">git@github.com:feedhenry-raincatcher/raincatcher-angularjs.git</code>
						</li><li class="listitem">
							MongoDB (tested with version: &lt;latest version&gt;)
						</li><li class="listitem">
							Redis (tested with version: &lt;latest version&gt;)
						</li></ul></div></section><section class="section" id="running_the_demo_app"><div class="titlepage"><div><div><h3 class="title">3.1.3. Running the Demo App</h3></div></div></div><p>
					This procedure will install the latest master branch.
				</p><h5 id="pro-cloning-the-git-repository-running-the-demo-app">Cloning the Git Repository</h5><pre class="programlisting language-bash">git clone git@github.com:feedhenry-raincatcher/raincatcher-angularjs.git

cd raincatcher-angularjs</pre><h5 id="pro-installing-angular-dependencies-running-the-demo-app">Installing Repository Dependencies</h5><pre class="programlisting language-bash">npm install
npm run bootstrap</pre><h5 id="pro-installing-core-dependencies-running-the-demo-app">Installing Core Dependencies</h5><pre class="programlisting language-bash">cd ./core
npm install
npm run bootstrap</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The Core repository is automatically cloned by the command <code class="literal">npm run bootstrap</code>.
					</p></div></div><h5 id="pro-starting-mongodb-and-redis-running-the-demo-app">Starting MongoDB and Redis</h5><p>
					Start MongoDB. For more information, see <a class="link" href="https://docs.mongodb.com/manual/tutorial/manage-mongodb-processes/#start-mongod-processes">Start MongoDB Processes</a>.
				</p><p>
					Start Redis. For more information, see <a class="link" href="https://redis.io/topics/quickstart#starting-redis">Starting Redis</a>.
				</p><h5 id="pro-starting-the-core-server-running-the-demo-app">Starting the Core Server</h5><pre class="programlisting language-bash">npm run start</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The terminal is out of use while the Core Server is running. Open a new terminal to run additional commands.
					</p></div></div><h5 id="pro-running-the-mobile-and-portal-demo-applications-running-the-demo-app">Running the Mobile and Portal Demo Applications</h5><pre class="programlisting language-bash">cd ..
npm run start</pre><p>
					Both the Mobile and Portal Demo open automatically in a browser.
				</p><p>
					For login details, refer to <a class="link" href="#credentials-for-the-demo-application-running-the-demo-app" title="3.1.4.1. Credentials for the Demo Application">Credentials for the Demo Application</a> section of <a class="link" href="#ref-demo-app-running-the-demo-app" title="3.1.4. RainCatcher Demo Application Reference Material">RainCatcher Demo Application Reference Material</a>.
				</p></section><section class="section" id="ref-demo-app-running-the-demo-app"><div class="titlepage"><div><div><h3 class="title">3.1.4. RainCatcher Demo Application Reference Material</h3></div></div></div><p>
					This section includes:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							<a class="link" href="#credentials-for-the-demo-application-running-the-demo-app" title="3.1.4.1. Credentials for the Demo Application">Credentials for the Demo Application</a>
						</li></ol></div><section class="section" id="credentials-for-the-demo-application-running-the-demo-app"><div class="titlepage"><div><div><h4 class="title">3.1.4.1. Credentials for the Demo Application</h4></div></div></div><p>
						Login using the following credentials:
					</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; ">Application</th><th style="text-align: left; vertical-align: top; ">Username</th><th style="text-align: left; vertical-align: top; ">Password</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; ">
									<p>
										Mobile
									</p>
									</td><td style="text-align: left; vertical-align: top; ">
									<p>
										<code class="literal">trever</code>
									</p>
									</td><td style="text-align: left; vertical-align: top; ">
									<p>
										<code class="literal">123</code>
									</p>
									</td></tr><tr><td style="text-align: left; vertical-align: top; ">
									<p>
										Portal
									</p>
									</td><td style="text-align: left; vertical-align: top; ">
									<p>
										<code class="literal">max</code>
									</p>
									</td><td style="text-align: left; vertical-align: top; ">
									<p>
										<code class="literal">123</code>
									</p>
									</td></tr></tbody></table></div></section></section></section></section><section class="chapter" id="programming-a-raincatcher-project"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Programming a RainCatcher Project</h1></div></div></div><section class="section" id="working_with_passportauth"><div class="titlepage"><div><div><h2 class="title">4.1. Working With PassportAuth</h2></div></div></div><p>
				This section describes how to modify aspects of <span class="strong strong"><strong>PassportAuth</strong></span>.
			</p><section class="section" id="con-passportauth-module-working-with-passportjs"><div class="titlepage"><div><div><h3 class="title">4.1.1. Introducing the RainCatcher PassportAuth Module</h3></div></div></div><p>
					The <a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-core/tree/master/cloud/passportauth">PassportAuth</a> module is RainCatcher’s implementation of <span class="strong strong"><strong>Passport.js</strong></span>. It is the default authentication and authorization module for RainCatcher.
				</p><p>
					<span class="strong strong"><strong>PassportAuth</strong></span> provides pluggable authentication using <a class="link" href="http://passportjs.org/docs/configure">strategies</a>. <span class="strong strong"><strong>PassportAuth</strong></span> offers a comprehensive set of strategies that support authentication using a username and password, Facebook logon, Twitter logon, and more.
				</p><p>
					<span class="strong strong"><strong>PassportAuth</strong></span> provides:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Access Control of Express routes
						</li><li class="listitem">
							Authentication using the <a class="link" href="../../../api/0.0.1/auth-passport/docs/modules/_src_auth_defaultstrategy_.html">default strategy</a>
						</li><li class="listitem">
							Express session middleware using <a class="link" href="https://github.com/expressjs/session">express-session</a>
						</li></ul></div></section><section class="section" id="pro-working-with-passportauth-working-with-passportjs"><div class="titlepage"><div><div><h3 class="title">4.1.2. Introduction</h3></div></div></div><p>
					This section includes:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							<a class="link" href="#pro-pointing-passportauth-to-a-datasource-working-with-passportjs" title="Pointing PassportAuth to a Datasource">Pointing PassportAuth to a Datasource</a>
						</li></ol></div></section><section class="section" id="prerequisites_2"><div class="titlepage"><div><div><h3 class="title">4.1.3. Prerequisites</h3></div></div></div><p>
					You must have completed:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							<a class="link" href="#getting-started" title="Chapter 3. Getting Started with RainCatcher">Getting Started</a>
						</li></ol></div></section><section class="section" id="procedure"><div class="titlepage"><div><div><h3 class="title">4.1.4. Procedure</h3></div></div></div><section class="section" id="configuration_of_passportauth_module"><div class="titlepage"><div><div><h4 class="title">4.1.4.1. Configuration of PassportAuth module</h4></div></div></div><p>
						The module is an out of the box security solution for default integration. PassportAuth uses JSON files that contain user data. This user data contains sample users and access roles for demo purposes in the <a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-core/blob/master/demo/server/src/modules/wfm-user/users.json">Demo Data</a>. The following procedure describes how to use a different user data source.
					</p><h5 id="pro-pointing-passportauth-to-a-datasource-working-with-passportjs">Pointing PassportAuth to a Datasource</h5><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							<span class="emphasis"><em>UserRepository</em></span> requires user data containing a minimum of username and password to work.
						</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Implement the <a class="link" href="../../../api/0.0.1/auth-passport/docs/interfaces/_src_user_userrepository_.userrepository.html">UserRepository</a>.
							</li></ol></div><p>
						For an end to end implementation of the <span class="emphasis"><em>UserRepository</em></span> interface, see <a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-core/tree/master/cloud/passportauth/example">PassportAuth-Example</a>.
					</p></section></section><section class="section" id="passportauth_reference_material"><div class="titlepage"><div><div><h3 class="title">4.1.5. PassportAuth Reference Material</h3></div></div></div><p>
					The security aspects of <span class="strong strong"><strong>PassportAuth</strong></span> module are described in the Security Strategy and cover areas such as:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Understanding Session Management
						</li><li class="listitem">
							Defining Access Control
						</li><li class="listitem">
							Defining Password Storage
						</li><li class="listitem">
							<span class="strong strong"><strong>PassportAuth</strong></span> Authentication
						</li><li class="listitem">
							<span class="strong strong"><strong>PassportAuth</strong></span> Authorization
						</li><li class="listitem">
							Customizing a Strategy
						</li><li class="listitem">
							PassportAuth Demo Users and Access Roles
						</li></ul></div><p>
					For more information, see <a class="link" href="#ref-passportauth-securitystrategy-defining-raincatcher-security" title="5.1. Defining the Security Strategy for RainCatcher PassportAuth">Defining the Security Strategy for RainCatcher PassportAuth</a>.
				</p></section></section></section><section class="chapter" id="raincatcher-security"><div class="titlepage"><div><div><h1 class="title">Chapter 5. RainCatcher Security</h1></div></div></div><section class="section" id="ref-passportauth-securitystrategy-defining-raincatcher-security"><div class="titlepage"><div><div><h2 class="title">5.1. Defining the Security Strategy for RainCatcher PassportAuth</h2></div></div></div><p>
				This section includes:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						<a class="link" href="#understanding-session-management-defining-raincatcher-security" title="5.1.1. Understanding Session Management">Understanding Session Management</a>
					</li><li class="listitem">
						<a class="link" href="#defining-access-control-defining-raincatcher-security" title="5.1.2. Defining Access Control">Defining Access Control</a>
					</li><li class="listitem">
						<a class="link" href="#defining-password-storage-defining-raincatcher-security" title="5.1.3. Defining Password Storage">Defining Password Storage</a>
					</li><li class="listitem">
						<a class="link" href="#passportauth-authentication-defining-raincatcher-security" title="5.1.4. PassportAuth Authentication">PassportAuth Authentication</a>
					</li><li class="listitem">
						<a class="link" href="#passportauth-authorization-defining-raincatcher-security" title="5.1.5. PassportAuth Authorization">PassportAuth Authorization</a>
					</li><li class="listitem">
						<a class="link" href="#customizing-a-strategy-defining-raincatcher-security" title="5.1.6. Customizing a Strategy">Customizing a Strategy</a>
					</li><li class="listitem">
						<a class="link" href="#passportAuth-demo-users-and-access-roles-defining-raincatcher-security" title="5.1.7. PassportAuth Demo Users and Access Roles">PassportAuth Demo Users and Access Roles</a>
					</li></ol></div><section class="section" id="understanding-session-management-defining-raincatcher-security"><div class="titlepage"><div><div><h3 class="title">5.1.1. Understanding Session Management</h3></div></div></div><p>
					The <span class="emphasis"><em>express-session</em></span> module provides session management functionality for <span class="strong strong"><strong>PassportAuth</strong></span>. For more information, see <a class="link" href="https://github.com/expressjs/session">express-session</a>.
				</p></section><section class="section" id="defining-access-control-defining-raincatcher-security"><div class="titlepage"><div><div><h3 class="title">5.1.2. Defining Access Control</h3></div></div></div><p>
					<span class="emphasis"><em>Routes</em></span> are protected by <span class="strong strong"><strong>PassportAuth</strong></span> which provides role based access control. <span class="emphasis"><em>AuthService</em></span> is an an implementation of <a class="link" href="../../../raincatcher-docs/0.0.1/auth-passport/docs/classes/_src_auth_passportauth_.passportauth.html#setup">PassportAuth</a>. For more information, see the following example:
				</p><pre class="programlisting language-typescript">app.get('/testAdminEndpoint', authService.protect('admin'), (req: express.Request, res: express.Response) =&gt; {
  res.json({ routeName: '/testAdminEndpoint', msg: 'authorized to access admin endpoint' });
});</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Demo roles are defined in <a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-core/blob/master/demo/server/src/modules/wfm-user/users.json">user.json</a>.
					</p></div></div></section><section class="section" id="defining-password-storage-defining-raincatcher-security"><div class="titlepage"><div><div><h3 class="title">5.1.3. Defining Password Storage</h3></div></div></div><p>
					The <span class="strong strong"><strong>PassportAuth</strong></span> user data is stored in <a class="link" href="../../../api/0.0.1/auth-passport/docs/interfaces/_src_user_userrepository_.userrepository.html#getuserbylogin">User Repository Interface</a>. Make sure that the <span class="emphasis"><em>User Repository Interface</em></span> is implemented in order to point <span class="strong strong"><strong>PassportAuth</strong></span> to a datasource.
				</p></section><section class="section" id="passportauth-authentication-defining-raincatcher-security"><div class="titlepage"><div><div><h3 class="title">5.1.4. PassportAuth Authentication</h3></div></div></div><p>
					RainCatcher authentication is handled by the coud server using users unique username and password combination. The <span class="strong strong"><strong>PassportAuth</strong></span> service is a default authentication strategy as based on the local Passport.js implementation.
				</p><p>
					<span class="strong strong"><strong>PassportAuth</strong></span> uses <a class="link" href="../../../api/0.0.1/auth-passport/docs/interfaces/_src_auth_passportauth_.endpointsecurity.html#authenticate">authenticate</a> middleware for cookie based authentication.To access <span class="emphasis"><em>express</em></span> routes, a user must login using their credentials. A cookie containing a user session key is used to authenticate and authorize a user who is requesting a server endpoint.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						In the demonstration application, the login post route has an authenticate() method that checks user credentials against the stored credentials in the <span class="emphasis"><em>user.json</em></span> file. It also checks the user’s role against the role on <span class="emphasis"><em>user.json</em></span>.
					</p></div></div><p>
					For more information, see the <a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-core/tree/master/cloud/passportauth/example">PassportAuth example</a>.
				</p></section><section class="section" id="passportauth-authorization-defining-raincatcher-security"><div class="titlepage"><div><div><h3 class="title">5.1.5. PassportAuth Authorization</h3></div></div></div><p>
					Authorization is supported by <a class="link" href="../../../api/0.0.1/auth-passport/docs/interfaces/_src_auth_passportauth_.endpointsecurity.html">protect middleware</a> that validates a <span class="emphasis"><em>user session id</em></span> against session.
				</p></section><section class="section" id="customizing-a-strategy-defining-raincatcher-security"><div class="titlepage"><div><div><h3 class="title">5.1.6. Customizing a Strategy</h3></div></div></div><p>
					The link:default strategy for the <span class="strong strong"><strong>PassportAuth</strong></span> module implements the <span class="strong strong"><strong>Passport.js</strong></span> local strategy. To use a different security strategy that is supported by RainCatcher, override the <a class="link" href="../../../api/0.0.1/auth-passport/docs/classes/_src_auth_passportauth_.passportauth.html#setup">PassportAuth.setup</a> method.
				</p></section><section class="section" id="passportAuth-demo-users-and-access-roles-defining-raincatcher-security"><div class="titlepage"><div><div><h3 class="title">5.1.7. PassportAuth Demo Users and Access Roles</h3></div></div></div><p>
					<span class="strong strong"><strong>PassportAuth</strong></span> is by default integrated with the Demo application and contains sample users and access roles which are defined in the <a class="link" href="https://github.com/feedhenry-raincatcher/raincatcher-core/blob/master/demo/server/src/modules/wfm-user/users.json">Demo Data</a> JSON file.
				</p><p>
					<span class="emphasis"><em>Revised on 2017-09-11 12:14:52 IST</em></span>
				</p></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140393507744320"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2017 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat Software Collections is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>